### Redis 활용

#### Redis 개요 및 자료구조
- redis.sh 참고

#### pub/sub
- redis 를 활용해 메시지를 발행하고 구독하는 서비스
- 특징
    - Redis Pub/Sub 시스템에서 동일한 채널을 여러 구독자가 구독하면, 해당 채널로 발행된 메시지가 모든 구독자에게 발송
    - 한번 발송된 메시지는 저장되지 않음.
        - 서버3이 죽어있는 동안 메시지가 발송되면, 서버3은 메시지를 못받는 단점이 있음.
- 기본적으로 채팅과 같은 서비스의 경우 특정 서버에 서비스가 의존적이기에 다수의 서버를 운영하면서 채팅서비스(알림서비스)를 운영할 때에 pub/sub 구조 활용가능

#### streams 기능
- pub/sub 과 다르게 stream 은 메시지가 저장되어 소비자가 나중에라도 읽을 수 있다.
    - kafke 와 자료구조가 유사
    - 실습
    ```sql
    xadd test_stream * message "hello, hi" // * 은 ID값 생성을 레디스에게 맡긴다
    xread block 20000 streams test_stream $ // $ 는 최신 메시지를 의미
    xrange test_stream - + // 전체 메시지 조회
        
    ```
- 활용
    - 이벤트 기반 시스템 → MSA에서는 kafka 를 쓰자. 안정적인 기능이 더 많다.
    - 채팅 및 알림 시스템 → 안정성을 위함.